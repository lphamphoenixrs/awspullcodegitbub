/*! For license information please see 37.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"1peQ":function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var _this = this;\n\n  var curItem = this.state.curItem;\n\n  return _react2.default.createElement(\n    'section',\n    { className: 'reset-password' },\n    _react2.default.createElement(\n      'div',\n      { className: 'container' },\n      _react2.default.createElement(\n        'div',\n        { className: 'row' },\n        _react2.default.createElement(\n          'div',\n          { className: 'col-md-12' },\n          _react2.default.createElement(\n            'div',\n            { className: 'form' },\n            _react2.default.createElement(\n              'h1',\n              { className: 'title' },\n              'T\\u1EA1o l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'form-group' },\n              _react2.default.createElement(_Controls.RPassword, {\n                label: 'M\\u1EADt kh\\u1EA9u m\\u1EDBi',\n                required: 'required',\n                inputId: 'password',\n                inputName: 'password',\n                inputClass: 'form-control',\n                value: curItem.password,\n                autoComplete: 'new-password',\n                onChange: function onChange(e) {\n                  _this.handleInputChange(e);\n                },\n                onBlue: function onBlue(e) {\n                  _this.validateOne(e);\n                },\n                maxLength: 30\n              })\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'form-group' },\n              _react2.default.createElement(_Controls.RPassword, {\n                label: 'Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi',\n                required: 'required',\n                inputId: 'repassword',\n                inputName: 'repassword',\n                inputClass: 'form-control',\n                value: curItem.repassword,\n                autoComplete: 'new-password',\n                onChange: function onChange(e) {\n                  _this.handleInputChange(e);\n                },\n                onBlue: function onBlue(e) {\n                  _this.validateOne(e);\n                },\n                maxLength: 30\n              })\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'submit-account' },\n              _react2.default.createElement(\n                'button',\n                { type: 'button', onClick: this.onSaveAction.bind(this), className: 'btn btn-danger' },\n                'L\\u01B0u'\n              )\n            )\n          )\n        )\n      )\n    )\n  );\n};\n\nvar _react = __webpack_require__(/*! react */ \"q1tI\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Controls = __webpack_require__(/*! ../../../component/Controls */ \"rqXC\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//# sourceURL=webpack:///./src/ui/common/PageResetPassword/PageResetPassword.jsx?")},"33dn":function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseValidate2 = __webpack_require__(/*! ../../../validator/BaseValidate */ \"DPEk\");\n\nvar _BaseValidate3 = _interopRequireDefault(_BaseValidate2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PageResetPasswordValidate = function (_BaseValidate) {\n    _inherits(PageResetPasswordValidate, _BaseValidate);\n\n    function PageResetPasswordValidate() {\n        _classCallCheck(this, PageResetPasswordValidate);\n\n        return _possibleConstructorReturn(this, (PageResetPasswordValidate.__proto__ || Object.getPrototypeOf(PageResetPasswordValidate)).call(this));\n    }\n\n    _createClass(PageResetPasswordValidate, [{\n        key: 'setRule',\n        value: function setRule() {\n            this.addRuleForField('password', 'trim', true);\n            this.addRuleForField('password', 'required', true, trans.translate('validate_rule.required'));\n            this.addRuleForField('password', 'minLength', 6, trans.translate('validate_rule.minLength_input'));\n            this.addRuleForField('password', 'maxLength', 20, trans.translate('validate_rule.maxLength_input'));\n\n            this.addRuleForField('repassword', 'trim', true);\n            this.addRuleForField('repassword', 'required', true, trans.translate('validate_rule.required'));\n            this.addRuleForField('password', 'minLength', 6, trans.translate('validate_rule.minLength_input'));\n            this.addRuleForField('repassword', 'maxLength', 20, trans.translate('validate_rule.maxLength_input'));\n        }\n    }, {\n        key: 'setAlias',\n        value: function setAlias() {\n            this.v.setAlias({\n                password: trans.translate('USER.password'),\n                repassword: trans.translate('USER.repassword')\n            });\n        }\n    }]);\n\n    return PageResetPasswordValidate;\n}(_BaseValidate3.default);\n\nexports.default = PageResetPasswordValidate;\n\n//# sourceURL=webpack:///./src/ui/common/PageResetPassword/PageResetPasswordValidate.js?")},XIp8:function(module,exports,__webpack_require__){eval('module.exports = (__webpack_require__(/*! dll-reference library */ "N6oO"))(305);\n\n//# sourceURL=webpack:///delegated_./node_modules/lodash-es/cloneDeep.js_from_dll-reference_library?')},Xq7e:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/ui/common/PageResetPassword/PageResetPassword.scss?")},pQ47:function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _react = __webpack_require__(/*! react */ \"q1tI\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _BaseComponent2 = __webpack_require__(/*! ../../BaseComponent */ \"Kh+H\");\n\nvar _BaseComponent3 = _interopRequireDefault(_BaseComponent2);\n\nvar _PageResetPassword = __webpack_require__(/*! ./PageResetPassword.jsx */ \"1peQ\");\n\nvar _PageResetPassword2 = _interopRequireDefault(_PageResetPassword);\n\nvar _PageResetPasswordValidate = __webpack_require__(/*! ./PageResetPasswordValidate */ \"33dn\");\n\nvar _PageResetPasswordValidate2 = _interopRequireDefault(_PageResetPasswordValidate);\n\n__webpack_require__(/*! ./PageResetPassword.scss */ \"Xq7e\");\n\nvar _Libs = __webpack_require__(/*! ../../../utils/Libs */ \"aKSJ\");\n\nvar _Libs2 = _interopRequireDefault(_Libs);\n\nvar _UserService = __webpack_require__(/*! ../../../services/UserService */ \"NcpN\");\n\nvar _UserService2 = _interopRequireDefault(_UserService);\n\nvar _cloneDeep = __webpack_require__(/*! lodash-es/cloneDeep */ \"XIp8\");\n\nvar _cloneDeep2 = _interopRequireDefault(_cloneDeep);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PageResetPassword = function (_BaseComponent) {\n  _inherits(PageResetPassword, _BaseComponent);\n\n  function PageResetPassword(props, context) {\n    _classCallCheck(this, PageResetPassword);\n\n    var _this = _possibleConstructorReturn(this, (PageResetPassword.__proto__ || Object.getPrototypeOf(PageResetPassword)).call(this, props, context));\n\n    _this.jsxTemplate = _PageResetPassword2.default;\n    _this.state = {\n      curItem: {},\n      message: null\n    };\n    _this.handleInputChange = _this.handleInputChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(PageResetPassword, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      _get(PageResetPassword.prototype.__proto__ || Object.getPrototypeOf(PageResetPassword.prototype), 'componentDidMount', this).call(this);\n      $(window).scrollTop(0, 0);\n      if (this.user) {\n        this.props.baseParam.history.push('/');return;\n      }\n\n      this.checkUserByHash();\n    }\n\n    /**\n     * @description save user info\n     */\n\n  }, {\n    key: 'checkUserByHash',\n    value: function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var self, params;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                self = this;\n                params = this.state.curItem;\n\n\n                if (_Libs2.default.isBlank(this.props.baseParam) || _Libs2.default.isBlank(this.props.baseParam.match.params.token)) {\n                  self.setState({ message: 'Link thay đổi mật khẩu không đúng hoặc đã hết hiệu lực.' });\n                } else {\n                  params.token_reset = this.props.baseParam.match.params.token;\n                }\n\n                _UserService2.default.instance.checkUserByHash(params, function (data) {\n                  if (_Libs2.default.isObjectEmpty(data)) {\n                    self.props.baseParam.history.push('/');\n                    return;\n                  }\n                }, false);\n\n              case 4:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkUserByHash() {\n        return _ref.apply(this, arguments);\n      }\n\n      return checkUserByHash;\n    }()\n  }, {\n    key: 'onSaveAction',\n    value: function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var params, self, param1, v, errors, errorState, regexp, generateSalt;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                params = this.state.curItem, self = this;\n                param1 = (0, _cloneDeep2.default)(this.state.curItem);\n                v = new _PageResetPasswordValidate2.default();\n                _context2.next = 5;\n                return v.FLValidationAll(params);\n\n              case 5:\n                errors = _context2.sent;\n                errorState = false;\n\n                if (errors) {\n                  setValidateMessage(errors);\n                  errorState = true;\n                }\n\n                regexp = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{6,}$/;\n\n                if (_Libs2.default.isBlank(param1.password) || param1.password.length < 6 || regexp.exec(param1.password) == null) {\n                  setValidateMessage({ password: trans.translate('USER.password_valid_min_6character') }, true);\n                  errorState = true;\n                } else {\n                  setValidateMessage({ password: '' }, true);\n                }\n\n                if (param1.password != param1.repassword) {\n                  setValidateMessage({ repassword: trans.translate('USER.password_incorrect') }, true);\n                  errorState = true;\n                } else {\n                  setValidateMessage({ repassword: '' }, true);\n                }\n\n                if (!errorState) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.abrupt('return');\n\n              case 13:\n                //remove message validation\n                removeAllValidateMessage();\n\n                generateSalt = _Libs2.default.generateSalt(64);\n\n                param1.screen_mode = Constants.SCREEN_MODE.ADD;\n                param1.password = _Libs2.default.AESEncrypt(_Libs2.default.sha256(params.password), generateSalt);\n                param1.salt = generateSalt;\n                delete param1.repassword;\n\n                if (!(_Libs2.default.isBlank(this.props.baseParam) || _Libs2.default.isBlank(this.props.baseParam.match.params.token))) {\n                  _context2.next = 24;\n                  break;\n                }\n\n                this.setState({ message: 'Link thay đổi mật khẩu không đúng hoặc đã hết hiệu lực.' });\n                return _context2.abrupt('return');\n\n              case 24:\n                param1.token_reset = this.props.baseParam.match.params.token;\n\n              case 25:\n\n                _UserService2.default.instance.resetPassword(param1, function (status, data, msg) {\n                  if (status) {\n                    self.toast(msg, \"info\");\n                    self.setState({\n                      curItem: {}\n                    });\n                    self.props.baseParam.history.push('/');\n                  } else if (!_Libs2.default.isBlank(msg)) {\n                    self.toast(msg, \"error\");\n                  }\n                }, true);\n\n              case 26:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onSaveAction() {\n        return _ref2.apply(this, arguments);\n      }\n\n      return onSaveAction;\n    }()\n\n    /**\n      * validate a field input\n      * @author long.pham 2019-09-18 13:45\n      * @param {Object} event \n      */\n\n  }, {\n    key: 'validateOne',\n    value: function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(event) {\n        var target, name, value, param, v, error;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                target = event.target;\n                name = target.name;\n                value = target.value;\n\n                if (!name) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                param = _defineProperty({}, name, value);\n                v = new _PageResetPasswordValidate2.default();\n                _context3.next = 8;\n                return v.validateOne(param, name);\n\n              case 8:\n                error = _context3.sent;\n\n                if (error != null) {\n                  setValidateMessage(error, true);\n                }\n\n              case 10:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function validateOne(_x) {\n        return _ref3.apply(this, arguments);\n      }\n\n      return validateOne;\n    }()\n\n    /**\n       * setValue method to Input\n       * @author Long.Pham 2019-01-17\n       */\n\n  }, {\n    key: 'handleInputChange',\n    value: function handleInputChange(event) {\n      var target = event.target;\n      var name = target.name;\n      var value = target.value;\n      if (name) {\n        var curItem = this.state.curItem;\n        var regexp = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{6,}$/;\n        if (name == 'password') {\n          if (value.length < 6 || regexp.exec(value) == null) {\n            setValidateMessage({ password: trans.translate('USER.password_valid_min_6character') }, true);\n          } else {\n            setValidateMessage({ password: '' }, true);\n          }\n        }\n\n        if (name == 'repassword') {\n          if (curItem.password != value) {\n            setValidateMessage({ repassword: trans.translate('USER.password_incorrect') }, true);\n          } else {\n            setValidateMessage({ repassword: '' }, true);\n          }\n        }\n\n        curItem[name] = value;\n        this.setState({\n          curItem: curItem\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.jsxTemplate.call(this);\n    }\n  }]);\n\n  return PageResetPassword;\n}(_BaseComponent3.default);\n\nexports.default = PageResetPassword;\n\n//# sourceURL=webpack:///./src/ui/common/PageResetPassword/PageResetPassword.js?")}}]);